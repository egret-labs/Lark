var __define=this.__define||function(t,i,e,n){Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:e,set:n})},lark;!function(t){function i(t,i,e){var n=t.prototype;n.__class__=i;var s=[i];e&&(s=s.concat(e));var r=n.__types__;if(n.__types__)for(var a=r.length,h=0;a>h;h++){var o=r[h];-1==s.indexOf(o)&&s.push(o)}n.__types__=s}t.registerClass=i}(lark||(lark={}));var lark;!function(t){function i(i,e){t.sys.$ticker.$stopTick(i,e)}t.stopTick=i}(lark||(lark={}));var lark;!function(t){function i(t,i){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t),n=e?e.__types__:null;return n?-1!==n.indexOf(i):!1}t.is=i}(lark||(lark={}));var lark;!function(t){t.Orientation=null}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t}();t.StageScaleMode=i,t.registerClass(i,"lark.StageScaleMode")}(lark||(lark={}));var lark;!function(t){t.Geolocation}(lark||(lark={}));var lark;!function(t){function i(){return Date.now()-t.$START_TIME}t.$START_TIME=0,t.getTimer=i}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i=t.stage?t.stage.$hashCode:0;return n[i]}function e(t){n[t.$stage.$hashCode]=t}var n={};t.$getTextAdapter=i,t.$cacheTextAdapter=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(t){t.sharedRenderContext,t.surfaceFactory}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.LEFT="left",t.RIGHT="right",t.CENTER="center",t}();t.HorizontalAlign=i,t.registerClass(i,"lark.HorizontalAlign")}(lark||(lark={}));var lark;!function(t){var i={},e=function(){function e(){}var n=e;return p=n.prototype,e.measureText=function(e,n){var s=t.sys.sharedRenderContext,r=0,a=i,h=a[n]||(a[n]={});s.font=n;for(var o=e.length,l=0;o>l;l++){var u=e.charCodeAt(l),c=h[u]||(h[u]=s.measureText(e.charAt(l)).width);r+=c}return r},e}();t.TextMeasurer=e,t.registerClass(e,"lark.TextMeasurer")}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t}();t.VerticalAlign=i,t.registerClass(i,"lark.VerticalAlign")}(lark||(lark={}));var lark;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(lark||(lark={}));var lark;!function(t){var i;!function(i){function e(i){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var s=t.$locale_strings[t.$language][i];if(!s)return"{"+i+"}";for(var r=e.length,a=0;r>a;a++)s=s.replace("{"+a+"}",e[a]);return s}i.tr=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){t.Sound}(lark||(lark={}));var lark;!function(t){var i=function(){function i(){}var e=i;return p=e.prototype,i.registerEaseFunction=function(i,e){t.EaseFunction[i]=e},i.NONE="None",i.SINE_EASE_IN="SineEaseIn",i.SineEaseOut="SineEaseOut",i.SINE_EASE_IN_OUT="SineEaseInOut",i.SineEaseOutIn="SineEaseOutIn",i.QUAD_EASE_IN="QuadEaseIn",i.QUAD_EASE_OUT="QuadEaseOut",i.QUAD_EASE_IN_OUT="QuadEaseInOut",i.QUAD_EASE_OUT_IN="QuadEaseOutIn",i.CUBIC_EASE_IN="CubicEaseIn",i.CUBIC_EASE_OUT="CubicEaseOut",i.CUBIC_EASE_IN_OUT="CubicEaseInOut",i.CUBIC_EASE_OUT_IN="CubicEaseOutIn",i.QUART_EASE_IN="QuartEaseIn",i.QUART_EASE_OUT="QuartEaseOut",i.QUART_EASE_IN_OUT="QuartEaseInOut",i.QUART_EASE_OUT_IN="QuartEaseOutIn",i.QUINT_EASE_IN="QuintEaseIn",i.QUINT_EASE_OUT="QuintEaseOut",i.QUINT_EASE_IN_OUT="QuintEaseInOut",i.QUINT_EASE_OUT_IN="QuintEaseOutIn",i.EXPO_EASE_IN="ExpoEaseIn",i.EXPO_EASE_OUT="ExpoEaseOut",i.EXPO_EASE_IN_OUT="ExpoEaseInOut",i.EXPO_EASE_OUT_IN="ExpoEaseOutIn",i.CIRC_EASE_IN="CircEaseIn",i.CIRC_EASE_OUT="CircEaseOut",i.CIRC_EASE_IN_OUT="CircEaseInOut",i.CIRC_EASE_OUT_IN="CircEaseOutIn",i.BACK_EASE_IN="BackEaseIn",i.BACK_EASE_OUT="BackEaseOut",i.BACK_EASE_IN_OUT="BackEaseInOut",i.BACK_EASE_OUT_IN="BackEaseOutIn",i.ELASTIC_EASE_IN="ElasticEaseIn",i.ELASTIC_EASE_OUT="ElasticEaseOut",i.ELASTIC_EASE_IN_OUT="ElasticEaseInOut",i.ELASTIC_EASE_OUT_IN="ElasticEaseOutIn",i.BOUNCE_EASE_IN="BounceEaseIn",i.BounceEaseOut="BounceEaseOut",i.BOUNCE_EASE_IN_OUT="BounceEaseInOut",i.BOUNCE_EASE_OUT_IN="BounceEaseOutIn",i}();t.Ease=i,t.registerClass(i,"lark.Ease")}(lark||(lark={}));var lark;!function(t){t.Video}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.GET="GET",t.POST="POST",t}();t.HttpMethod=i,t.registerClass(i,"lark.HttpMethod")}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.None=function(t){return t},t.SineEaseIn=function(t){return Math.sin((t-1)*Math.PI*.5)+1},t.SineEaseOut=function(t){return Math.sin(t*Math.PI*.5)},t.SineEaseInOut=function(t){return.5*Math.sin((t-.5)*Math.PI)+.5},t.SineEaseOutIn=function(t){return.5>t?.5*Math.sin(t*Math.PI):.5*Math.sin((t-1)*Math.PI)+1},t.QuadEaseIn=function(t){return t*t},t.QuadEaseOut=function(t){return-(t-1)*(t-1)+1},t.QuadEaseInOut=function(t){return.5>t?t*t*2:-(t-1)*(t-1)*2+1},t.QuadEaseOutIn=function(t){var i=(t-.5)*(t-.5)*2;return.5>t?.5-i:.5+i},t.CubicEaseIn=function(t){return t*t*t},t.CubicEaseOut=function(t){return(t-1)*(t-1)*(t-1)+1},t.CubicEaseInOut=function(t){return.5>t?t*t*t*4:(t-1)*(t-1)*(t-1)*4+1},t.CubicEaseOutIn=function(t){return(t-.5)*(t-.5)*(t-.5)*4+.5},t.QuartEaseIn=function(t){return t*t*t*t},t.QuartEaseOut=function(t){var i=t-1;return-i*i*i*i+1},t.QuartEaseInOut=function(t){if(.5>t)return t*t*t*t*8;var i=t-1;return-i*i*i*i*8+1},t.QuartEaseOutIn=function(t){var i=(t-.5)*(t-.5)*(t-.5)*(t-.5)*8;return.5>t?.5-i:.5+i},t.QuintEaseIn=function(t){return t*t*t*t*t},t.QuintEaseOut=function(t){var i=t-1;return i*i*i*i*i+1},t.QuintEaseInOut=function(t){if(.5>t)return t*t*t*t*t*16;var i=t-1;return i*i*i*i*i*16+1},t.QuintEaseOutIn=function(t){var i=t-.5;return i*i*i*i*i*16+.5},t.ExpoEaseIn=function(t){return Math.pow(2,10*(t-1))},t.ExpoEaseOut=function(t){return-Math.pow(2,-10*t)+1},t.ExpoEaseInOut=function(t){return.5>t?.5*Math.pow(2,10*(2*t-1)):.5*-Math.pow(2,-10*(t-.5)*2)+1.00048828125},t.ExpoEaseOutIn=function(t){return.5>t?.5*-Math.pow(2,-20*t)+.5:.5*Math.pow(2,10*(2*(t-.5)-1))+.5},t.CircEaseIn=function(t){return 1-Math.sqrt(1-t*t)},t.CircEaseOut=function(t){return Math.sqrt(1-(1-t)*(1-t))},t.CircEaseInOut=function(t){return.5>t?.5-Math.sqrt(.25-t*t):Math.sqrt(.25-(1-t)*(1-t))+.5},t.CircEaseOutIn=function(t){var i=Math.sqrt(.25-(.5-t)*(.5-t));return.5>t?i:1-i},t.BackEaseIn=function(t){return 2.70158*t*t*t-1.70158*t*t},t.BackEaseOut=function(t){var i=t-1;return 2.70158*i*i*i+1.70158*i*i+1},t.BackEaseInOut=function(t){var i=t-1;return.5>t?10.80632*t*t*t-3.40316*t*t:10.80632*i*i*i+3.40316*i*i+1},t.BackEaseOutIn=function(t){var i=t-.5;return.5>t?10.80632*i*i*i+3.40316*i*i+.5:10.80632*i*i*i-3.40316*i*i+.5},t.ElasticEaseIn=function(t){return 0==t||1==t?t:-(Math.pow(2,10*(t-1))*Math.sin(2*(t-1.075)*Math.PI/.3))},t.ElasticEaseOut=function(t){return 0==t||.5==t||1==t?t:Math.pow(2,10*-t)*Math.sin(2*(-t-.075)*Math.PI/.3)+1},t.ElasticEaseInOut=function(t){return 0==t||.5==t||1==t?t:.5>t?-(Math.pow(2,10*t-10)*Math.sin((2*t-2.15)*Math.PI/.3)):Math.pow(2,10-20*t)*Math.sin((-4*t+1.85)*Math.PI/.3)*.5+1},t.ElasticEaseOutIn=function(t){return 0==t||.5==t||1==t?t:.5>t?Math.pow(2,-20*t)*Math.sin((4*-t-.15)*Math.PI/.3)*.5+.5:.5*-(Math.pow(2,20*(t-1))*Math.sin((4*t-4.15)*Math.PI/.3))+.5},t.bounceEaseIn=function(i){return 1-t.bounceEaseOut(1-i)},t.bounceEaseOut=function(t){var i,e=7.5625,n=2.75;return i=1/2.75>t?e*t*t:2/n>t?e*(t-1.5/n)*(t-1.5/n)+.75:2.5/n>t?e*(t-2.25/n)*(t-2.25/n)+.9375:e*(t-2.625/n)*(t-2.625/n)+.984375},t.BounceEaseInOut=function(i){return.5>i?.5*t.bounceEaseIn(2*i):.5*t.bounceEaseOut(2*i-1)+.5},t.BounceEaseOutIn=function(i){return.5>i?.5*t.bounceEaseOut(2*i):.5*t.bounceEaseIn(2*i-1)+.5},t.BounceEaseIn=t.bounceEaseIn,t.BounceEaseOut=t.bounceEaseOut,t}();t.EaseFunction=i,t.registerClass(i,"lark.EaseFunction")}(lark||(lark={}));var lark;!function(t){t.HttpRequest}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=i,t.registerClass(i,"lark.HttpResponseType")}(lark||(lark={}));var lark;!function(t){t.XML}(lark||(lark={}));var lark;!function(t){t.ImageLoader}(lark||(lark={}));var lark;!function(t){function i(t){var i=typeof t;if(!t||"object"!=i&&!t.prototype)return i;var e=t.prototype?t.prototype:Object.getPrototypeOf(t);if(e.hasOwnProperty("__class__"))return e.__class__;var n=e.constructor.toString(),s=n.indexOf("("),r=n.substring(9,s);return Object.defineProperty(e,"__class__",{value:r,enumerable:!1,writable:!0}),r}t.getQualifiedClassName=i}(lark||(lark={}));var lark;!function(t){function i(i){if(!i||"object"!=typeof i&&!i.prototype)return null;var e=i.prototype?i.prototype:Object.getPrototypeOf(i),n=Object.getPrototypeOf(e);if(!n)return null;var s=t.getQualifiedClassName(n.constructor);return s?s:null}t.getQualifiedSuperclassName=i}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(){function t(){}var i=t;return p=i.prototype,t.DEFAULT="default",t.RETINA="retina",t.DEVICE="device",t}();i.HighResolutionMode=e,t.registerClass(e,"lark.sys.HighResolutionMode")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){function i(i,e){t.sys.$ticker.$startTick(i,e)}t.startTick=i}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(){function t(){}var i=t;return p=i.prototype,t.AUTO="auto",t.PORTRAIT="portrait",t.LANDSCAPE="landscape",t.LANDSCAPE_FLIPPED="landscapeFlipped",t}();i.OrientationMode=e,t.registerClass(e,"lark.sys.OrientationMode")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){t.Motion}(lark||(lark={}));var lark;!function(){}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=[],n=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var i=t;return p=i.prototype,t.release=function(t){e.push(t)},t.create=function(){var i=e.pop();return i||(i=new t),i},p.setTo=function(t,i,e,n){return this.minX=t,this.minY=i,this.maxX=e,this.maxY=n,this.updateArea(),this},p.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},p.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},p.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},p.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},p.isEmpty=function(){return this.width<=0||this.height<=0},p.intersects=function(t){var i=this.minX>t.minX?this.minX:t.minX,e=this.maxX<t.maxX?this.maxX:t.maxX;return i>e?!1:(i=this.minY>t.minY?this.minY:t.minY,e=this.maxY<t.maxY?this.maxY:t.maxY,e>=i)},p.updateRegion=function(t,i){var e,n,s,r,a=i,h=a.a,o=a.b,l=a.c,u=a.d,c=a.tx,p=a.ty,d=t.x,f=t.y,$=d+t.width,g=f+t.height;if(1===h&&0===o&&0===l&&1===u)e=Math.floor(d+c)-1,n=Math.floor(f+p)-1,s=Math.ceil($+c)+1,r=Math.ceil(g+p)+1;else{var v=h*d+l*f+c,m=o*d+u*f+p,y=h*$+l*f+c,T=o*$+u*f+p,x=h*$+l*g+c,E=o*$+u*g+p,_=h*d+l*g+c,k=o*d+u*g+p,C=0;v>y&&(C=v,v=y,y=C),x>_&&(C=x,x=_,_=C),e=Math.floor(x>v?v:x)-1,s=Math.ceil(y>_?y:_)+1,m>T&&(C=m,m=T,T=C),E>k&&(C=E,E=k,k=C),n=Math.floor(E>m?m:E)-1,r=Math.ceil(T>k?T:k)+1}this.minX=e,this.minY=n,this.maxX=s,this.maxY=r,this.width=s-e,this.height=r-n,this.area=this.width*this.height},t}();i.Region=n,t.registerClass(n,"lark.sys.Region")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(i){function e(t,i){var e=t.minX<i.minX?t.minX:i.minX,n=t.minY<i.minY?t.minY:i.minY,s=t.maxX>i.maxX?t.maxX:i.maxX,r=t.maxY>i.maxY?t.maxY:i.maxY;return(s-e)*(r-n)}var n=function(){function t(){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1}var n=t;return p=n.prototype,p.setClipRect=function(t,i){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(i),this.clipArea=this.clipWidth*this.clipHeight},p.addRegion=function(t){var e=t.minX,n=t.minY,s=t.maxX,r=t.maxY;if(this.hasClipRect&&(0>e&&(e=0),0>n&&(n=0),s>this.clipWidth&&(s=this.clipWidth),r>this.clipHeight&&(r=this.clipHeight)),e>=s||n>=r)return!1;if(this.clipRectChanged)return!0;var a=this.dirtyList,h=i.Region.create();return a.push(h.setTo(e,n,s,r)),this.mergeDirtyList(a),!0},p.clear=function(){for(var t=this.dirtyList,e=t.length,n=0;e>n;n++)i.Region.release(t[n]);t.length=0},p.getDirtyRegions=function(){var t=this.dirtyList;if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var e=i.Region.create();t.push(e.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(t););return this.dirtyList},p.mergeDirtyList=function(t){var n=t.length;if(2>n)return!1;for(var s=this.hasClipRect,r=n>3?Number.POSITIVE_INFINITY:0,a=0,h=0,o=0,l=0;n-1>l;l++){var u=t[l];s&&(o+=u.area);for(var c=l+1;n>c;c++){var p=t[c],d=e(u,p)-u.area-p.area;r>d&&(a=l,h=c,r=d)}}if(s&&o/this.clipArea>.95&&(this.clipRectChanged=!0),a!=h){var f=t[h];return t[a].union(f),i.Region.release(f),t.splice(h,1),!0}return!1},t}();i.DirtyRegion=n,t.registerClass(n,"lark.sys.DirtyRegion")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=i,t.registerClass(i,"lark.BlendMode")}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i=s[t];return void 0===i?0:i}function e(t){var i=n[t];return void 0===i?"normal":i}for(var n=["normal","add","erase"],s={},r=n.length,a=0;r>a;a++){var h=n[a];s[h]=a}t.blendModeToNumber=i,t.numberToBlendMode=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(){function t(){}var i=__define,e=t;return p=e.prototype,i(t,"language",function(){return t.$language}),i(t,"isMobile",function(){return t.$isMobile}),i(t,"os",function(){return t.$os}),i(t,"hasGeolocation",function(){return t.$hasGeolocation}),i(t,"hasOrientation",function(){return t.$hasOrientation}),i(t,"hasMotion",function(){return t.$hasMotion}),i(t,"devicePixelRatio",function(){return t.$devicePixelRatio}),t.$language="zh-CN",t.$os="Unknown",t}();t.Capabilities=i,t.registerClass(i,"lark.Capabilities")}(lark||(lark={}));var lark;!function(t){var i;!function(i){i.$ticker,i.$invalidateRenderFlag=!1,i.$requestRenderingFlag=!1;var e=function(){function e(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.frameInterval=2e3,this.lastCount=2e3,t.$START_TIME=Date.now()}var n=e;return p=n.prototype,p.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},p.$removePlayer=function(t){var i=this.playerList.indexOf(t);if(-1!==i){this.playerList=this.playerList.concat(),this.playerList.splice(i,1)}},p.$startTick=function(t,i){var e=this.getTickIndex(t,i);-1==e&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(i))},p.$stopTick=function(t,i){var e=this.getTickIndex(t,i);-1!=e&&(this.concatTick(),this.callBackList.splice(e,1),this.thisObjectList.splice(e,1))},p.getTickIndex=function(t,i){for(var e=this.callBackList,n=this.thisObjectList,s=e.length-1;s>=0;s--)if(e[s]===t&&n[s]==i)return s;return-1},p.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},p.$setFrameRate=function(t){t=+t||0,0>=t||this.$frameRate!==t&&(this.$frameRate=t,t>60&&(t=60),this.lastCount=this.frameInterval=Math.round(6e4/t))},p.update=function(){for(var e=this.callBackList,n=this.thisObjectList,s=e.length,r=i.$requestRenderingFlag,a=t.getTimer(),h=0;s>h;h++)e[h].call(n[h],a)&&(r=!0);return this.lastCount-=1e3,this.lastCount>0?void(r&&this.render(!1)):(this.lastCount+=this.frameInterval,this.render(!0),void this.broadcastEnterFrame())},p.render=function(t){var e=this.playerList,n=e.length;if(0!=n){i.$invalidateRenderFlag&&(this.broadcastRender(),i.$invalidateRenderFlag=!1);for(var s=0;n>s;s++)e[s].$render(t);i.$requestRenderingFlag=!1}},p.broadcastEnterFrame=function(){var i=t.DisplayObject.$enterFrameCallBackList,e=i.length;if(0!==e){i=i.concat();for(var n=0;e>n;n++)i[n].emitWith(t.Event.ENTER_FRAME)}},p.broadcastRender=function(){var i=t.DisplayObject.$renderCallBackList,e=i.length;if(0!==e){i=i.concat();for(var n=0;e>n;n++)i[n].emitWith(t.Event.RENDER)}},e}();i.Ticker=e,t.registerClass(e,"lark.sys.Ticker")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark_stages,lark;!function(t){function i(t){if(!t)return null;var i=e[t];if(i)return i;var n=t.split("."),s=n.length;i=__global;for(var r=0;s>r;r++){var a=n[r];if(i=i[a],!i)return null}return e[t]=i,i}var e={};t.getDefinitionByName=i}(lark||(lark={}));var __global=__global||this,lark;!function(t){t.$hashCount=1;var i=function(){function i(){this.$hashCode=t.$hashCount++}var e=__define,n=i;return p=n.prototype,e(p,"hashCode",function(){return this.$hashCode}),i}();t.HashObject=i,t.registerClass(i,"lark.HashObject")}(lark||(lark={}));var __extends=this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);e.prototype=i.prototype,t.prototype=new e},lark;!function(t){var i;!function(i){i.screenAdapter;var e=function(i){function e(){i.call(this)}__extends(e,i);var n=e;return p=n.prototype,p.calculateStageSize=function(i,e,n,s,r){var a=e,h=n,o=s,l=r,u=e/o||0,c=n/l||0;switch(i){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:o=Math.round(e/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(n/u);break;case t.StageScaleMode.NO_BORDER:u>c?h=Math.round(l*u):a=Math.round(o*c);break;case t.StageScaleMode.SHOW_ALL:u>c?a=Math.round(o*c):h=Math.round(l*u);break;default:o=e,l=n}return{stageWidth:o,stageHeight:l,displayWidth:a,displayHeight:h}},e}(t.HashObject);i.ScreenAdapter=e,t.registerClass(e,"lark.sys.ScreenAdapter",["lark.sys.IScreenAdapter"])}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(i){function e(t){i.call(this),this.touchDownTarget={},this.touchDownTime={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(e,i);var n=e;return p=n.prototype,p.onTouchBegin=function(i,e,n){var s=this.findTarget(i,e);this.touchDownTarget[n]=s.$hashCode,this.touchDownTime[n]=t.getTimer(),t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_BEGIN,!0,!0,i,e,n)},p.onTouchMove=function(i,e,n){if(this.lastTouchX!==i||this.lastTouchY!==e){this.lastTouchX=i,this.lastTouchY=e;var s=this.findTarget(i,e);t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_MOVE,!0,!0,i,e,n)}},p.onTouchEnd=function(i,e,n){var s=this.findTarget(i,e),r=this.touchDownTarget[n];delete this.touchDownTarget[n],t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_END,!0,!0,i,e,n),s=this.findTarget(i,e),r===s.$hashCode?t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_TAP,!0,!0,i,e,n):t.TouchEvent.emitTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,i,e,n);var a=t.getTimer();if(a-this.touchDownTime[n]>5e3){var h=0;for(var o in this.touchDownTime)a-this.touchDownTime[o]>5e3&&h++;if(3==h){var l=new t.TextField("powered by lark");this.stage.addChild(l),setTimeout(function(){l.parent&&l.parent.removeChild(l)},2e3)}}delete this.touchDownTime[n]},p.findTarget=function(t,i){var e=this.stage.$hitTest(t,i);return e||(e=this.stage),e},e}(t.HashObject);i.TouchHandler=e,t.registerClass(e,"lark.sys.TouchHandler")}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.lastTime=-1,this._currentTime=0,this._totalTime=0,this.invalidTotalTime=!0,this._loop=!1,this._isPlaying=!1,this.tweens=[],this.calls=[]}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"totalTime",function(){return this.getTotalTime()}),p.getTotalTime=function(){if(1==this.invalidTotalTime)return this._totalTime;this.invalidTotalTime=!0;for(var t,i=this.tweens,e=0,n=0,s=i.length;s>n;n++)t=i[n].startTime+i[n].time,t>e&&(e=t);return this._totalTime=e,e},p.$invalidateTotalTime=function(){0!=this.invalidTotalTime&&(this.invalidTotalTime=!1)},n(p,"loop",function(){return this._loop},function(t){this._loop=t}),n(p,"isPlaying",function(){return this._isPlaying}),p.update=function(t){var i=this.getTotalTime(),e=this._currentTime;this._currentTime+=t-this.lastTime;var n=-1,s=0;for(this._currentTime>=i&&(n=this._currentTime%i,s=Math.floor(this._currentTime/i),this._loop||this.$setPlaying(!1));s>-1;){s&&-1!=n&&(this._currentTime=i);var r,a=this.calls;for(l=0,u=a.length;u>l;l++)r=a[l],(r.time>e&&r.time<=this._currentTime||0==r.time&&0==e&&this._currentTime)&&r.callBack.apply(r.thisObj,r.args);for(var h,o=this.tweens,l=0,u=o.length;u>l;l++)h=o[l],(h.$startTime+h.$time>e&&h.$startTime<=this._currentTime||0==h.$startTime&&0==e&&this._currentTime)&&h.$update(this._currentTime);if(s--,0==s?-1!=n&&(e=0,this._currentTime=n):s&&(e=0),0==this._loop)break}return this.lastTime=t,!0},p.play=function(){var i=t.getTimer();this.$setPlaying(!0,i)},p.stop=function(){this.$setPlaying(!1)},p.$setPlaying=function(i,e){i&&(this.lastTime=e),this._isPlaying!=i&&(this._isPlaying=i,i?t.startTick(this.update,this):t.stopTick(this.update,this))},p.gotoAndPlay=function(i){if(this.tweens.length){i=0|+i,i=0>i?0:i,i>this.totalTime&&(i=this.totalTime),this._currentTime=i;var e=t.getTimer();this.$setPlaying(!0,e)}},p.gotoAndStop=function(i){if(this.tweens.length){i=0|+i,i=0>i?0:i,i>this.totalTime&&(i=this.totalTime),this._currentTime=i;{t.getTimer()}this.$setPlaying(!1)}},p.addTween=function(t){return this.tweens.push(t),t.$setTimeLine(this),this.$invalidateTotalTime(),t},p.removeTween=function(t){for(var i=this.tweens,e=0,n=i.length;n>e;e++)if(i[e]==t){i.splice(e,1)[0].$setTimeLine(null),this.$invalidateTotalTime();break}0==i.length&&this.$setPlaying(!1)},p.call=function(t,i,e){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];this.calls.push({time:t,callBack:i,thisObj:e,args:n})},e}(t.HashObject);t.TimeLine=i,t.registerClass(i,"lark.TimeLine")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.call(this)}__extends(i,t);var e=i;return p=e.prototype,p.init=function(t,i,e){this.tween=t,this._attributes=i,this.keys=Object.keys(i);for(var n=t.target,s={},r=this.keys,a=r.length,h=0;a>h;h++){var o=r[h];s[o]=e&&o in e?e[o]:n[o]}return this.startAttributes=s,null},p.update=function(t){for(var i=this.tween.target,e=this.keys,n=e.length,s=this.startAttributes,r=0;n>r;r++){var a=e[r];i[a]=(this._attributes[a]-s[a])*t+s[a]}},i}(t.HashObject);t.BasicPlugin=i,t.registerClass(i,"lark.BasicPlugin",["lark.IPlugin"])}(lark||(lark={}));var lark;!function(t){function i(t){return t%=2*r,0>t&&(t+=2*r),t}function e(t,i,e,n){return Math.sqrt((e-t)*(e-t)+(n-i)*(n-i))}function n(t,i,n,s,r){var a=e(t,i,n,s);r.x=(n-t)/a,r.y=(s-i)/a}function s(t){var i=t.graphicsMap={};return i[6]=t.arc,i[18]=t.arcTo,i[17]=t.beginPath,i[14]=t.bezierCurveTo,i[10]=t.closePath,i[9]=t.fill,i[13]=t.fillRect,i[8]=t.lineTo,i[12]=t.moveTo,i[7]=t.quadraticCurveTo,i[11]=t.rect,i[15]=t.stroke,i[16]=t.strokeRect,i[3]=function(i){t.lineWidth=i},i[0]=function(i){t.miterLimit=i},i[5]=function(i){t.fillStyle=i},i[1]=function(i){t.lineCap=i},i[2]=function(i){t.lineJoin=i},i[4]=function(i){t.strokeStyle=i},i}var r=Math.PI,a=r/2,h=r+a,o=2*r,l={x:0,y:0},u={x:0,y:0},c={x:0,y:0},d=function(d){function f(){d.call(this),this.$commands=[],this.reset()}__extends(f,d);var $=__define,g=f;return p=g.prototype,f.createRadialGradient=function(i,e,n,s,r,a){return t.sys.sharedRenderContext.createRadialGradient(i,e,n,s,r,a)},f.createLinearGradient=function(i,e,n,s){return t.sys.sharedRenderContext.createLinearGradient(i,e,n,s)},f.createPattern=function(i,e){return t.sys.sharedRenderContext.createPattern(i,e)},$(p,"fillStyle",function(){return this._fillStyle},function(i){"number"==typeof i&&(i=t.sys.toColorString(i)),this._fillStyle=i,this.pushCommand(5,arguments)}),$(p,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this.pushCommand(3,arguments)}),$(p,"lineCap",function(){return this._lineCap},function(t){this._lineCap=t,this.pushCommand(1,arguments)}),$(p,"strokeStyle",function(){return this._strokeStyle},function(i){"number"==typeof i&&(i=t.sys.toColorString(i)),this._strokeStyle=i,this.pushCommand(4,arguments)}),$(p,"lineJoin",function(){return this._lineJoin},function(t){this._lineJoin=t,this.pushCommand(2,arguments)}),$(p,"miterLimit",function(){return this._miterLimit},function(t){this._miterLimit=t,this.pushCommand(0,arguments)}),p.arc=function(t,i,e,n,s,r){if(this.pushCommand(6,arguments),!(0>e)){if(r){var a=s;s=n,n=a}this.arcBounds(t,i,e,n,s)}},p.arcBounds=function(t,e,n,s,l){if(s=i(s),l=i(l),Math.abs(s-l)<.01)return this.extendByPoint(t-n,e-n),void this.extendByPoint(t+n,e+n);var u=0;s>l&&(u=o,l+=u);var c=Math.cos(s)*n,p=Math.cos(l)*n,d=Math.min(c,p),f=Math.max(c,p);r+u>=s&&l>=r+u&&(d=-n),u>=s&&l>=u&&(f=n);var $=Math.sin(s)*n,g=Math.sin(l)*n,v=Math.min($,g),m=Math.max($,g);h+u>=s&&l>=h+u&&(v=-n),a+u>=s&&l>=a+u&&(m=n),this.extendByPoint(d+t,v+e),this.extendByPoint(f+t,m+e)},p.quadraticCurveTo=function(t,i,e,n){this.pushCommand(7,arguments),this.checkMoveTo(),this.extendByPoint(t,i),this.extendByPoint(e,n)},p.bezierCurveTo=function(t,i,e,n,s,r){this.pushCommand(14,arguments),this.checkMoveTo(),this.extendByPoint(t,i),this.extendByPoint(e,n),this.extendByPoint(s,r)},p.lineTo=function(t,i){this.pushCommand(8,arguments),this.checkMoveTo(),this.extendByPoint(t,i)},p.fill=function(){this.pushCommand(9,arguments),this.hasFill=!0},p.closePath=function(){this.pushCommand(10,arguments)},p.rect=function(t,i,e,n){this.pushCommand(11,arguments),this.extendByPoint(t,i),this.extendByPoint(t+e,i+n)},p.moveTo=function(t,i){this.pushCommand(12,arguments),this.moveToX=t,this.moveToY=i,this.hasMoved=!0},p.fillRect=function(t,i,e,n){this.pushCommand(13,arguments),this.extendByPoint(t,i),this.extendByPoint(t+e,i+n),this.hasFill=!0},p.stroke=function(){this.pushCommand(15,arguments),this.hasStroke=!0},p.strokeRect=function(t,i,e,n){this.pushCommand(16,arguments),this.hasStroke=!0,this.extendByPoint(t,i),this.extendByPoint(t+e,i+n)},p.beginPath=function(){this.pushCommand(17,arguments),this.hasMoved=!1,this.moveToX=134217728,this.moveToY=134217728},p.arcTo=function(t,s,a,h,o){if(this.pushCommand(18,arguments),134217728!==this.moveToX){this.checkMoveTo(),n(this.moveToX,this.moveToY,t,s,u),n(a,h,t,s,c),l.x=u.x+c.x,l.y=u.y+c.y,n(l.x,l.y,0,0,l);var p=u.x*l.x+u.y*l.y,d=e(u.x,u.y,0,0),f=e(l.x,l.y,0,0),$=p/(d*f),g=Math.acos($),v=o/Math.sin(g),m=t+l.x*v,y=s+l.y*v,T=o/Math.tan(g),x=t+u.x*T,E=s+u.y*T,_=t+c.x*T,k=s+c.y*T;n(m,y,x,E,l);var C=Math.atan2(l.y,l.x);n(m,y,_,k,l);var M=Math.atan2(l.y,l.x),b=M-C;if(b=i(b),b>r){var R=M;M=C,C=R}this.arcBounds(m,y,o,C,M)}},p.clear=function(){this.reset(),this.$commands.length=0,this.$targetDisplay.$invalidateContentBounds()},p.reset=function(){this._fillStyle="#000000",this._lineCap="butt",this._lineJoin="miter",this._lineWidth=1,this._miterLimit=10,this._strokeStyle="#000000",this.hasMoved=!1,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.isFirst=!0,this.moveToX=134217728,this.moveToY=134217728,this.hasStroke=!1,this.hasFill=!1},p.pushCommand=function(t,i){this.$commands.push({type:t,arguments:i}),this.$targetDisplay.$invalidateContentBounds()},p.checkMoveTo=function(){this.hasMoved&&(this.hasMoved=!1,this.extendByPoint(this.moveToX,this.moveToY))},p.extendByPoint=function(t,i){this.isFirst?(this.isFirst=!1,this.maxX=this.minX=t,this.maxY=this.minY=i):(this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i))},p.$hitTest=function(i,e){var n=this.$targetDisplay,s=n.$getInvertedConcatenatedMatrix(),r=s.a*i+s.c*e+s.tx,a=s.b*i+s.d*e+s.ty,h=t.sys.sharedRenderContext;h.surface.width=h.surface.height=3,h.translate(1-r,1-a),this.$render(h,!0);var o=h.getImageData(1,1,1,1).data;return 0===o[3]?null:n},p.$measureContentBounds=function(t){if(!this.hasFill&&!this.hasStroke)return void t.setEmpty();if(this.hasStroke)var i=this._lineWidth,e=.5*i;else e=i=0;t.setTo(this.minX-e,this.minY-e,this.maxX-this.minX+i,this.maxY-this.minY+i)},p.$render=function(t,i){t.save(),t.fillStyle="#000000",t.lineCap="butt",t.lineJoin="miter",t.lineWidth=1,t.miterLimit=10,t.strokeStyle="#000000",t.beginPath();var e=t.graphicsMap;e||(e=s(t));var n=this.$commands,r=n.length;if(i)for(var a=0;r>a;a++){var h=n[a],o=h.type;5!==o&&4!=o&&e[h.type].apply(t,h.arguments)}else for(var a=0;r>a;a++){var h=n[a];e[h.type].apply(t,h.arguments)}t.restore()},f}(t.HashObject);t.Graphics=d,t.registerClass(d,"lark.Graphics")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(i,e,n,s){t.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=i,this.$bubbles=!!e,this.$cancelable=!!n,this.data=s}__extends(i,t);var e=__define,n=i;return p=n.prototype,e(p,"type",function(){return this.$type}),e(p,"bubbles",function(){return this.$bubbles}),e(p,"cancelable",function(){return this.$cancelable}),e(p,"eventPhase",function(){return this.$eventPhase}),e(p,"currentTarget",function(){return this.$currentTarget}),e(p,"target",function(){return this.$target}),p.$setTarget=function(t){this.$target=t},p.isDefaultPrevented=function(){return this.$isDefaultPrevented},p.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},p.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},p.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},p.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},i.create=function(t,i,e,n){var s=t.eventPool;if(s||(s=t.eventPool=[]),s.length){var r=s.pop();return r.$type=i,r.$bubbles=!!e,r.$cancelable=!!n,r.$isDefaultPrevented=!1,r.$isPropagationStopped=!1,r.$isPropagationImmediateStopped=!1,r.$eventPhase=2,r}return new t(i,e,n)},i.release=function(t){t.clean();var i=Object.getPrototypeOf(t).constructor;i.eventPool.push(t)},i.ADDED_TO_STAGE="addedToStage",i.REMOVED_FROM_STAGE="removedFromStage",i.ADDED="added",i.REMOVED="removed",i.ENTER_FRAME="enterFrame",i.RENDER="render",i.RESIZE="resize",i.CHANGE="change",i.CHANGING="changing",i.COMPLETE="complete",i.IO_ERROR="ioError",i.FOCUS_IN="focusIn",i.FOCUS_OUT="focusOut",i.ENDED="ended",i}(t.HashObject);t.Event=i,t.registerClass(i,"lark.Event")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(i,e,n,s,r,a,h,o,l){t.call(this),this.$clipX=0,this.$clipY=0,this.$clipWidth=0,this.$clipHeight=0,this.$offsetX=0,this.$offsetY=0,this.$width=0,this.$height=0,this.$bitmapData=null,this.$bitmapData=i,this.$clipX=0|+e,this.$clipY=0|+n,this.$clipWidth=0|+s,this.$clipHeight=0|+r,this.$offsetX=0|+a,this.$offsetY=0|+h,this.$width=+o||this.$clipWidth+Math.max(0,this.$offsetX),this.$height=+l||this.$clipHeight+Math.max(0,this.$offsetY)}__extends(i,t);var e=__define,n=i;return p=n.prototype,e(p,"width",function(){return this.$width}),e(p,"height",function(){return this.$height}),e(p,"bitmapData",function(){return this.$bitmapData}),i}(t.HashObject);t.Texture=i,t.registerClass(i,"lark.Texture")}(lark||(lark={}));var lark;!function(t){var i=[],e=function(t){function e(i,e){void 0===i&&(i=0),void 0===e&&(e=0),t.call(this),this.x=i,this.y=e}__extends(e,t);var n=__define,s=e;return p=s.prototype,e.release=function(t){t&&i.push(t)},e.create=function(t,n){var s=i.pop();return s||(s=new e),s.setTo(t,n)},n(p,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)
}),p.setTo=function(t,i){return this.x=t,this.y=i,this},p.clone=function(){return new e(this.x,this.y)},p.equals=function(t){return this.x==t.x&&this.y==t.y},e.distance=function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},e}(t.HashObject);t.Point=e,t.registerClass(e,"lark.Point"),t.$TempPoint=new e}(lark||(lark={}));var lark;!function(t){var i=[],e=function(e){function n(t){void 0===t&&(t=null),e.call(this),this.$EventEmitter={0:t?t:this,1:{},2:{},3:0}}__extends(n,e);var s=n;return p=s.prototype,p.on=function(t,i,e,n,s){this.$addListener(t,i,e,n,s)},p.once=function(t,i,e,n,s){this.$addListener(t,i,e,n,s,!0)},p.$addListener=function(t,i,e,n,s,r){var a=this.$EventEmitter,h=n?a[2]:a[1],o=h[t];o?0!==a[3]&&(h[t]=o=o.concat()):o=h[t]=[],s=0|+s;for(var l=-1,u=o.length,c=0;u>c;c++){var p=o[c];if(p.listener===i&&p.thisObject===e&&p.target===this)return;-1===l&&p.priority<s&&(l=c)}var d={type:t,listener:i,thisObject:e,priority:s,target:this,useCapture:n,emitOnce:!!r};-1!==l?o.splice(l,0,d):o.push(d)},p.removeListener=function(t,i,e,n){var s=this.$EventEmitter,r=n?s[2]:s[1],a=r[t];if(a){0!==s[3]&&(r[t]=a=a.concat());for(var h=a.length,o=0;h>o;o++){var l=a[o];if(l.listener===i&&l.thisObject===e&&l.target===this){a.splice(o,1);break}}0==a.length&&(r[t]=null)}},p.hasListener=function(t){var i=this.$EventEmitter;return!(!i[1][t]&&!i[2][t])},p.willTrigger=function(t){return this.hasListener(t)},p.emit=function(t){return t.$currentTarget=this.$EventEmitter[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},p.$notifyListener=function(t,e){var n=this.$EventEmitter,s=e?n[2]:n[1],r=s[t.$type];if(!r)return!0;var a=r.length;if(0===a)return!0;var h=i;n[3]++;for(var o=0;a>o;o++){var l=r[o];if(l.listener.call(l.thisObject,t),l.emitOnce&&h.push(l),t.$isPropagationImmediateStopped)break}for(n[3]--;h.length;)l=h.pop(),l.target.removeListener(l.type,l.listener,l.thisObject,l.useCapture);return!t.$isDefaultPrevented},p.emitWith=function(i,e,n,s){if(e||this.hasListener(i)){var r=t.Event.create(t.Event,i,e,n);r.data=s;var a=this.emit(r);return t.Event.release(r),a}return!0},n}(t.HashObject);t.EventEmitter=e,t.registerClass(e,"lark.EventEmitter",["lark.IEventEmitter"])}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e,n,s,r){i.call(this,t,e,n),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=+s||0,this.bytesTotal=+r||0}__extends(e,i);var n=e;return p=n.prototype,e.emitProgressEvent=function(i,n,s,r){var a=t.Event.create(e,n);a.bytesLoaded=+s||0,a.bytesTotal=+r||0;var h=i.emit(a);return t.Event.release(a),h},e.PROGRESS="progress",e}(t.Event);t.ProgressEvent=i,t.registerClass(i,"lark.ProgressEvent")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i}(t.Event);t.OrientationEvent=i,t.registerClass(i,"lark.OrientationEvent")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e,n){i.call(this,t,e,n)}__extends(e,i);var n=e;return p=n.prototype,p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},e.emitTimerEvent=function(i,n,s,r){var a=t.Event.create(e,n,s,r),h=i.emit(a);return t.Event.release(a),h},e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",e}(t.Event);t.TimerEvent=i,t.registerClass(i,"lark.TimerEvent")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i.PERMISSION_DENIED="permissionDenied",i.UNAVAILABLE="unavailable",i}(t.Event);t.GeolocationEvent=i,t.registerClass(i,"lark.GeolocationEvent")}(lark||(lark={}));var lark;!function(t){var i=function(t){function i(){t.apply(this,arguments)}__extends(i,t);var e=i;return p=e.prototype,i}(t.Event);t.MotionEvent=i,t.registerClass(i,"lark.MotionEvent")}(lark||(lark={}));var lark;!function(t){var i={},e=function(e){function n(i,n,s,r,a){e.call(this),this.invalidProperty=!1,this.$startTime=0,this._currentTime=0,this.pugins=[],n=+n,0>n&&(n=0),this.$time=n,this._target=i,this._propertiesTo=s,this._propertiesFrom=a,this.ease=r,this._ease||(this.ease=t.Ease.NONE);var h=new t.TimeLine;h.addTween(this),h.play()}__extends(n,e);var s=__define,r=n;return p=r.prototype,s(p,"propertiesTo",void 0,function(t){this._propertiesTo=t,this.invalidProperty=!1}),s(p,"propertiesFrom",void 0,function(t){this._propertiesFrom=t,this.invalidProperty=!1}),s(p,"time",function(){return this.$time},function(t){t=0|+t,this.$time=+t,this._timeLine&&this._timeLine.$invalidateTotalTime()}),s(p,"startTime",function(){return this.$startTime},function(t){t=0|+t,0>t&&(t=0),this.$startTime=t,this._timeLine&&this._timeLine.$invalidateTotalTime(),this.invalidProperty=!1}),s(p,"target",function(){return this._target},function(t){this._target=t,this.invalidProperty=!1}),s(p,"ease",function(){return this._ease},function(e){if(!i[e]){var n=t.EaseFunction[e];if(null==n)return;for(var s=[],r=0;2e3>=r;r++)s[r]=n(r/2e3);i[e]=s}this._ease=e,this._easeData=i[e]}),s(p,"timeLine",function(){return this._timeLine||(this._timeLine=new t.TimeLine,this._timeLine.addTween(this)),this._timeLine}),p.$setTimeLine=function(t){this._timeLine&&this._timeLine.removeTween(this),this._timeLine=t},p.initParmas=function(){var i,e=this._propertiesTo,s=n.plugins;if(e){for(var r=Object.keys(s),a=0,h=r.length;h>a;a++)r[a]in e&&(i=new s[r[a]],i.init(this,e,this._propertiesFrom),this.pugins.push(i));for(r=Object.keys(e),a=0;a<r.length;a++){var o=r[a];if("string"==typeof o){var l=e[o];"number"==typeof l&&o in this._target||(delete e[o],r.splice(a,1),a--)}else delete e[o],r.splice(a,1),a--}r.length&&(i=new t.BasicPlugin,i.init(this,e,this._propertiesFrom),this.pugins.push(i))}this.invalidProperty=!0},p.call=function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return this._complete=t,this._completeThis=i,this._completeParams=e,this},p.update=function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return this._update=t,this._updateThis=i,this._updateParams=e,this},p.$update=function(t){this.invalidProperty||this.initParmas(),this._currentTime=t-this.$startTime,this._currentTime>this.$time&&(this._currentTime=this.$time);for(var i=this.pugins.length,e=this._easeData[2e3*(this._currentTime/this.$time)|0],n=0;i>n;n++)this.pugins[n].update(e);return null!=this._update&&this._update.apply(this._updateThis,this._updateParams),this._currentTime==this.$time&&null!=this._complete&&this._complete.apply(this._completeThis,this._completeParams),!0},n.to=function(t,i,e,s,r){return new n(t,i,e,s,r)},n.registerPlugin=function(t,i){n.plugins[t]=i},n.plugins={},n}(t.EventEmitter);t.Tween=e,t.registerClass(e,"lark.Tween")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(t,e){void 0===e&&(e=0),i.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.delay=t,this.repeatCount=0|+e}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"delay",function(){return this._delay},function(t){t=+t||0,1>t&&(t=1),this._delay!==t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),n(p,"currentCount",function(){return this._currentCount}),n(p,"running",function(){return this._running}),p.reset=function(){this.stop(),this._currentCount=0},p.start=function(){this._running||(t.startTick(this.$update,this),this._running=!0)},p.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},p.$update=function(){if(this.lastCount-=1e3,!(this.lastCount>0)){this.lastCount+=this.updateInterval,this._currentCount++;var i=this.repeatCount>0&&this._currentCount>=this.repeatCount;t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER),i&&(this.stop(),t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER_COMPLETE))}},e}(t.EventEmitter);t.Timer=i,t.registerClass(i,"lark.Timer")}(lark||(lark={}));var lark;!function(t){function i(t){switch(t){case s:case-r:return 0;case n:case-n:return-1;case r:case-s:return 0;default:return Math.cos(t)}}function e(t){switch(t){case s:case-r:return 1;case n:case-n:return 0;case r:case-s:return-1;default:return Math.sin(t)}}var n=Math.PI,s=n/2,r=n+s,a=2*n,h=[],o=function(s){function r(t,i,e,n,r,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=0),s.call(this),this.a=t,this.b=i,this.c=e,this.d=n,this.tx=r,this.ty=a}__extends(r,s);var o=r;return p=o.prototype,r.release=function(t){t&&h.push(t)},r.create=function(){var t=h.pop();return t||(t=new r),t},p.clone=function(){return new r(this.a,this.b,this.c,this.d,this.tx,this.ty)},p.concat=function(t){var i=this.a*t.a,e=0,n=0,s=this.d*t.d,r=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(i+=this.b*t.c,s+=this.c*t.b,e+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,r+=this.ty*t.c,a+=this.tx*t.b),this.a=i,this.b=e,this.c=n,this.d=s,this.tx=r,this.ty=a},p.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},p.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},p.invert=function(){this.$invertInto(this)},p.$invertInto=function(t){var i=this.a,e=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty;if(0===e&&0===n)return t.b=t.c=0,void(0===i||0===s?t.a=t.d=t.tx=t.ty=0:(i=t.a=1/i,s=t.d=1/s,t.tx=-i*r,t.ty=-s*a));var h=i*s-e*n;if(0===h)return void t.identity();h=1/h;var o=t.a=s*h;e=t.b=-e*h,n=t.c=-n*h,s=t.d=i*h,t.tx=-(o*r+n*a),t.ty=-(e*r+s*a)},p.rotate=function(t){if(t=+t,0!==t){var n=i(t),s=e(t),r=this.a,a=this.b,h=this.c,o=this.d,l=this.tx,u=this.ty;this.a=r*n-a*s,this.b=r*s+a*n,this.c=h*n-o*s,this.d=h*s+o*n,this.tx=l*n-u*s,this.ty=l*s+u*n}},p.scale=function(t,i){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==i&&(this.b*=i,this.d*=i,this.ty*=i)},p.setTo=function(t,i,e,n,s,r){return this.a=t,this.b=i,this.c=e,this.d=n,this.tx=s,this.ty=r,this},p.transformPoint=function(i,e,n){var s=this.a*i+this.c*e+this.tx,r=this.b*i+this.d*e+this.ty;return n?(n.setTo(s,r),n):new t.Point(s,r)},p.translate=function(t,i){this.tx+=t,this.ty+=i},p.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.tx===t.tx&&this.ty===t.ty},p.$transformBounds=function(t){var i=this.a,e=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty,h=t.x,o=t.y,l=h+t.width,u=o+t.height,c=i*h+n*o+r,p=e*h+s*o+a,d=i*l+n*o+r,f=e*l+s*o+a,$=i*l+n*u+r,g=e*l+s*u+a,v=i*h+n*u+r,m=e*h+s*u+a,y=0;c>d&&(y=c,c=d,d=y),$>v&&(y=$,$=v,v=y),t.x=Math.floor($>c?c:$),t.width=Math.ceil((d>v?d:v)-t.x),p>f&&(y=p,p=f,f=y),g>m&&(y=g,g=m,m=y),t.y=Math.floor(g>p?p:g),t.height=Math.ceil((f>m?f:m)-t.y)},p.getDeterminant=function(){return this.a*this.d-this.b*this.c},p.$getScaleX=function(){var t=this;if(1===t.a&&0===t.b)return 1;var i=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-i:i},p.$getScaleY=function(){var t=this;if(0===t.c&&1===t.d)return 1;var i=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-i:i},p.$getSkewX=function(){return Math.atan2(this.d,this.c)-n/2},p.$getSkewY=function(){return Math.atan2(this.b,this.a)},p.$updateScaleAndRotation=function(t,n,s,r){if(!(0!==s&&s!==a||0!==r&&r!==a))return this.a=t,this.b=this.c=0,void(this.d=n);var h=i(s),o=e(s);s===r?(this.a=h*t,this.b=o*t):(this.a=i(r)*t,this.b=e(r)*t),this.c=-o*n,this.d=h*n},p.$preMultiplyInto=function(t,i){var e=t.a*this.a,n=0,s=0,r=t.d*this.d,a=t.tx*this.a+this.tx,h=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(e+=t.b*this.c,r+=t.c*this.b,n+=t.a*this.b+t.b*this.d,s+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,h+=t.tx*this.b),i.a=e,i.b=n,i.c=s,i.d=r,i.tx=a,i.ty=h},r}(t.HashObject);t.Matrix=o,t.registerClass(o,"lark.Matrix"),t.$TempMatrix=new o}(lark||(lark={}));var lark;!function(t){function i(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var e=function(e){function n(){e.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$touchEnabled=!0,this.$scrollRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$parentDisplayList=null,this.$isDirty=!1,this.$renderAlpha=1,this.$renderMatrix=new t.Matrix,this.$renderRegion=null,this.$displayFlags=880,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1}}__extends(n,e);var s=__define,r=n;return p=r.prototype,p.$setFlags=function(t){this.$displayFlags|=t},p.$removeFlags=function(t){this.$displayFlags&=~t},p.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var i=this.$parent;i&&i.$removeFlagsUp(t)}},p.$hasFlags=function(t){return(this.$displayFlags&t)===t},p.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var i=this.$parent;i&&i.$propagateFlagsUp(t)}},p.$propagateFlagsDown=function(t){this.$setFlags(t)},p.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},p.invalidateMatrix=function(){this.$setFlags(8),this.invalidatePosition()},p.invalidatePosition=function(){this.$invalidateTransform(),this.$propagateFlagsDown(48),this.$parent&&this.$parent.$propagateFlagsUp(4)},s(p,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),s(p,"parent",function(){return this.$parent}),p.$setParent=function(t){this.$parent=t},p.$onAddToStage=function(i,e){this.$stage=i,this.$nestLevel=e,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},p.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},s(p,"stage",function(){return this.$stage}),s(p,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),p.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},p.$setMatrix=function(t){var e=this.$DisplayObject,n=e[6];n.equals(t)||(n.copyFrom(t),e[0]=n.$getScaleX(),e[1]=n.$getScaleY(),e[2]=t.$getSkewX(),e[3]=t.$getSkewY(),e[4]=i(180*e[3]/Math.PI),this.$removeFlags(8),this.invalidatePosition())},p.$getConcatenatedMatrix=function(){var i=this.$DisplayObject[7];if(this.$hasFlags(16)){if(this.$parent){this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),i);var e=this.$scrollRect;e&&i.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-e.x,-e.y),i)}else i.copyFrom(this.$getMatrix());this.$displayList&&(this.$displayList.$renderRegion.moved=!0),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(16)}return i},p.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},s(p,"x",function(){return this.$getX()},function(t){this.$setX(t)}),p.$getX=function(){return this.$DisplayObject[6].tx},p.$setX=function(t){t=+t||0;var i=this.$DisplayObject[6];return t===i.tx?!1:(i.tx=t,this.invalidatePosition(),!0)},s(p,"y",function(){return this.$getY()},function(t){this.$setY(t)}),p.$getY=function(){return this.$DisplayObject[6].ty},p.$setY=function(t){t=+t||0;var i=this.$DisplayObject[6];return t===i.ty?!1:(i.ty=t,this.invalidatePosition(),!0)},s(p,"scaleX",function(){return this.$DisplayObject[0]},function(t){this.$setScaleX(t)}),p.$setScaleX=function(t){t=+t||0;var i=this.$DisplayObject;return t===i[0]?!1:(i[0]=t,this.invalidateMatrix(),!0)},s(p,"scaleY",function(){return this.$DisplayObject[1]},function(t){this.$setScaleY(t)}),p.$setScaleY=function(t){return t=+t||0,t===this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=t,this.invalidateMatrix(),!0)},s(p,"rotation",function(){return this.$DisplayObject[4]},function(t){t=+t||0,t=i(t);var e=this.$DisplayObject;if(t!==e[4]){var n=t-e[4],s=n/180*Math.PI;e[2]+=s,e[3]+=s,e[4]=t,this.invalidateMatrix()}}),s(p,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),p.$getWidth=function(){return this.$getTransformedBounds(this.$parent,t.$TempRectangle).width},p.$setWidth=function(i){if(i=+i||0,!(0>i)){var e=this.$DisplayObject,n=this.$getOriginalBounds(),s=this.$getTransformedBounds(this.$parent,t.$TempRectangle),r=e[4]/180*Math.PI,a=n.$getBaseWidth(r);if(a){var h=n.$getBaseHeight(r);e[1]=s.height/h,e[0]=i/a,this.invalidateMatrix()}}},s(p,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),p.$getHeight=function(){return this.$getTransformedBounds(this.$parent,t.$TempRectangle).height},p.$setHeight=function(i){if(i=+i||0,!(0>i)){var e=this.$DisplayObject,n=this.$getOriginalBounds(),s=this.$getTransformedBounds(this.$parent,t.$TempRectangle),r=e[4]/180*Math.PI,a=n.$getBaseHeight(r);if(a){var h=n.$getBaseWidth(r);e[1]=i/a,e[0]=s.width/h,this.invalidateMatrix()}}},s(p,"visible",function(){return this.$visible},function(t){t=!!t,t!==this.$visible&&(this.$visible=t,this.$invalidateTransform())}),s(p,"cacheAsBitmap",function(){return this.$DisplayObject[11]},function(i){i=!!i,this.$DisplayObject[11]=i;var e=!!this.$displayList;if(e!==i)if(i){var n=t.sys.DisplayList.create(this);n&&(this.$displayList=n,this.$parentDisplayList&&(n.setDevicePixelRatio(this.$parentDisplayList.$ratioMatrix.a),this.$parentDisplayList.markDirty(n)),this.$cacheAsBitmapChanged())}else t.sys.DisplayList.release(this.$displayList),this.$displayList=null,this.$cacheAsBitmapChanged()}),p.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderRegion&&t.markDirty(this),this.$propagateFlagsDown(48)},s(p,"alpha",function(){return this.$alpha},function(t){t=+t||0,t!==this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(!0))}),p.$getConcatenatedAlpha=function(){if(this.$hasFlags(64)){if(this.$parent){var t=this.$parent.$getConcatenatedAlpha();this.$renderAlpha=t*this.$alpha}else this.$renderAlpha=this.$alpha;this.$removeFlags(64)}return this.$renderAlpha},s(p,"touchEnabled",function(){return this.$touchEnabled},function(t){this.$setTouchEnabled(!!t)}),p.$setTouchEnabled=function(t){this.$touchEnabled=t},s(p,"scrollRect",function(){return this.$scrollRect},function(i){(i||this.$scrollRect)&&(i?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(i)):this.$scrollRect=null,this.invalidatePosition())}),s(p,"blendMode",function(){return t.sys.numberToBlendMode(this.$blendMode)},function(i){var e=t.sys.blendModeToNumber(i);e!==this.$blendMode&&(this.$blendMode=e,this.$invalidateTransform())}),s(p,"mask",function(){return this.$mask},function(t){t!==this.$mask&&t!==this&&(t&&(t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this),this.$mask=t,this.$invalidateTransform())}),p.getBounds=function(t,i){return t=t||this,this.$getTransformedBounds(t,i)},p.$getTransformedBounds=function(i,e){var n=this.$getOriginalBounds();if(e||(e=new t.Rectangle),e.copyFrom(n),i===this||e.isEmpty())return e;var s;if(i){s=t.$TempMatrix;var r=i.$getInvertedConcatenatedMatrix();r.$preMultiplyInto(this.$getConcatenatedMatrix(),s)}else s=this.$getConcatenatedMatrix();return s.$transformBounds(e),e},p.globalToLocal=function(t,i,e){var n=this.$getInvertedConcatenatedMatrix();return n.transformPoint(t,i,e)},p.localToGlobal=function(t,i,e){var n=this.$getConcatenatedMatrix();return n.transformPoint(t,i,e)},p.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},p.$getOriginalBounds=function(){var t=this.$DisplayObject[9];return this.$hasFlags(4)&&(t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderRegion.moved=!0)),t},p.$measureChildBounds=function(){},p.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(2)),t},p.$measureContentBounds=function(){},p.$invalidate=function(){if(this.$renderRegion&&!this.$hasFlags(256)){this.$setFlags(256);var t=this.$displayList?this.$displayList:this.$parentDisplayList;t&&t.markDirty(this)}},p.$invalidateTransform=function(){if(!this.$hasFlags(512)){this.$setFlags(512);var t=this.$displayList;(t||this.$renderRegion)&&this.$parentDisplayList&&this.$parentDisplayList.markDirty(t||this)}},p.$update=function(){this.$removeFlagsUp(768),this.$getConcatenatedAlpha();var t=this.$getConcatenatedMatrix(),i=this.$getContentBounds(),e=this.$displayList||this.$parentDisplayList,n=this.$renderRegion;if(!e)return n.setTo(0,0,0,0),n.moved=!1,!1;if(!n.moved&&!e.$ratioChanged)return!1;n.moved=!1;var s=this.$renderMatrix;s.copyFrom(t);var r=e.root;return r!==this.$stage&&this.$getConcatenatedMatrixAt(r,s),e.$ratioMatrix.$preMultiplyInto(s,s),n.updateRegion(i,s),!0},p.$getConcatenatedMatrixAt=function(i,e){var n=i.$getInvertedConcatenatedMatrix();if(0===n.a||0===n.d){var s=this,r=i.$nestLevel;for(e.identity();s.$nestLevel>r;){var a=s.$scrollRect;a&&e.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),e.concat(s.$getMatrix()),s=s.$parent}}else n.$preMultiplyInto(e,e)},p.$render=function(){},p.$hitTest=function(t,i){if(!this.$renderRegion||!this.$visible)return null;var e=this.$getInvertedConcatenatedMatrix(),n=this.$getContentBounds(),s=e.a*t+e.c*i+e.tx,r=e.b*t+e.d*i+e.ty;if(n.contains(s,r)){if(!this.$children){if(this.$scrollRect&&!this.$scrollRect.contains(s,r))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null}return this}return null},p.$addListener=function(i,s,r,a,h,o){e.prototype.$addListener.call(this,i,s,r,a,h,o);var l=i==t.Event.ENTER_FRAME;if(l||i==t.Event.RENDER){var u=l?n.$enterFrameCallBackList:n.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},p.removeListener=function(i,s,r,a){e.prototype.removeListener.call(this,i,s,r,a);var h=i==t.Event.ENTER_FRAME;if((h||i==t.Event.RENDER)&&!this.hasListener(i)){var o=h?n.$enterFrameCallBackList:n.$renderCallBackList,l=o.indexOf(this);-1!==l&&o.splice(l,1)}},p.emit=function(t){if(!t.$bubbles)return e.prototype.emit.call(this,t);var i=this.$getPropagationList(this),n=.5*i.length;return t.$setTarget(this),this.$emitPropagationEvent(t,i,n),!t.$isDefaultPrevented},p.$getPropagationList=function(t){for(var i=[];t;)i.push(t),t=t.$parent;var e=i.concat();return e.reverse(),i=e.concat(i)},p.$emitPropagationEvent=function(t,i,e){for(var n=i.length,s=e-1,r=0;n>r;r++){var a=i[r];if(t.$currentTarget=a,t.$eventPhase=s>r?1:r==e||r==s?2:3,a.$notifyListener(t,e>r),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},p.willTrigger=function(t){for(var i=this;i;){if(i.hasListener(t))return!0;i=i.$parent}return!1},n.$enterFrameCallBackList=[],n.$renderCallBackList=[],n}(t.EventEmitter);t.DisplayObject=e,t.registerClass(e,"lark.DisplayObject",["lark.sys.Renderable"])}(lark||(lark={}));var lark;!function(t){var i=new t.Point,e=function(e){function n(t,i,n,s,r,a){e.call(this,t,i,n),this.targetChanged=!0,this.$setTo(s,r,a)}__extends(n,e);var s=__define,r=n;return p=r.prototype,p.$setTo=function(t,i,e){this.touchPointID=+e||0,this.$stageX=+t||0,this.$stageY=+i||0},s(p,"stageX",function(){return this.$stageX}),s(p,"stageY",function(){return this.$stageY}),s(p,"localX",function(){return this.targetChanged&&this.getLocalXY(),this._localX}),s(p,"localY",function(){return this.targetChanged&&this.getLocalXY(),this._localY}),p.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,i),this._localX=i.x,this._localY=i.y},p.$setTarget=function(t){this.$target=t,this.targetChanged=!!t},p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},n.emitTouchEvent=function(i,e,s,r,a,h,o){if(!s&&!i.hasListener(e))return!0;var l=t.Event.create(n,e,s,r);l.$setTo(a,h,o);var u=i.emit(l);return t.Event.release(l),u},n.TOUCH_MOVE="touchMove",n.TOUCH_BEGIN="touchBegin",n.TOUCH_END="touchEnd",n.TOUCH_TAP="touchTap",n.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",n}(t.Event);t.TouchEvent=e,t.registerClass(e,"lark.TouchEvent")}(lark||(lark={}));var lark;!function(t){var i=[],e=function(t){function e(i,e,n,s){void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),t.call(this),this.x=i,this.y=e,this.width=n,this.height=s}__extends(e,t);var n=__define,s=e;return p=s.prototype,e.release=function(t){t&&i.push(t)},e.create=function(){var t=i.pop();return t||(t=new e),t},n(p,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),n(p,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),n(p,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),n(p,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),p.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},p.setTo=function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},p.contains=function(t,i){return this.x<=t&&this.x+this.width>=t&&this.y<=i&&this.y+this.height>=i},p.intersection=function(t){return this.clone().$intersectInPlace(t)},p.$intersectInPlace=function(t){var i=this.x,e=this.y,n=t.x,s=t.y,r=Math.max(i,n),a=Math.min(i+this.width,n+t.width);if(a>=r){var h=Math.max(e,s),o=Math.min(e+this.height,s+t.height);if(o>=h)return this.setTo(r,h,a-r,o-h),this}return this.setEmpty(),this},p.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},p.isEmpty=function(){return this.width<=0||this.height<=0},p.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},p.clone=function(){return new e(this.x,this.y,this.width,this.height)},p.$getBaseWidth=function(t){var i=Math.abs(Math.cos(t)),e=Math.abs(Math.sin(t));return i*this.width+e*this.height},p.$getBaseHeight=function(t){var i=Math.abs(Math.cos(t)),e=Math.abs(Math.sin(t));return e*this.width+i*this.height},e}(t.HashObject);t.Rectangle=e,t.registerClass(e,"lark.Rectangle"),t.$TempRectangle=new e}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$graphics=new t.Graphics,this.$graphics.$targetDisplay=this,this.$renderRegion=new t.sys.Region}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"graphics",function(){return this.$graphics}),p.$hitTest=function(t,e){var n=i.prototype.$hitTest.call(this,t,e);return n&&(n=this.$graphics.$hitTest(t,e)),n},p.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},p.$render=function(t){this.$graphics.$render(t,!1)},e}(t.DisplayObject);t.Shape=i,t.registerClass(i,"lark.Shape")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(e){i.call(this),this._pixelHitTest=!1,this.$renderRegion=new t.sys.Region,this.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:!0},this.$setBitmapData(e)}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"bitmapData",function(){return this.$Bitmap[0]},function(t){this.$setBitmapData(t)}),p.$setBitmapData=function(i){var e=this.$Bitmap;if(i!=e[0]){if(e[0]=i,i)if(i instanceof t.Texture){var n=i;this.setImageData(n.$bitmapData,n.$clipX,n.$clipY,n.$clipWidth,n.$clipHeight,n.$offsetX,n.$offsetY,n.$width,n.$height)}else this.setImageData(i,0,0,i.width,i.height,0,0,i.width,i.height);else this.setImageData(null,0,0,0,0,0,0,0,0);this.$invalidateContentBounds()}},p.setImageData=function(t,i,e,n,s,r,a,h,o){var l=this.$Bitmap;l[1]=t,l[2]=i,l[3]=e,l[4]=n,l[5]=s,l[6]=r,l[7]=a,l[8]=h,l[9]=o},n(p,"smoothing",function(){return this.$Bitmap[10]},function(t){t=!!t;var i=this.$Bitmap;t!==i[10]&&(i[10]=t,this.$invalidate())}),n(p,"pixelHitTest",function(){return this._pixelHitTest},function(t){this._pixelHitTest=!!t}),p.$hitTest=function(t,e){var n=i.prototype.$hitTest.call(this,t,e);return n&&this._pixelHitTest&&(n=this.hitTestPixel(t,e)),n},p.hitTestPixel=function(i,e){var n,s,r=this.$getInvertedConcatenatedMatrix(),a=r.a*i+r.c*e+r.tx,h=r.b*i+r.d*e+r.ty,o=this.$displayList;return o?(n=o.renderContext,s=n.getImageData(a-o.offsetX,h-o.offsetY,1,1).data):(n=t.sys.sharedRenderContext,n.surface.width=n.surface.height=3,n.translate(1-a,1-h),this.$render(n),s=n.getImageData(1,1,1,1).data),0===s[3]?null:this},p.$measureContentBounds=function(t){var i=this.$Bitmap,e=i[1];if(e){var n=i[6];n>0&&(n=0);var s=i[7];s>0&&(s=0),t.setTo(n,s,i[8],i[9])}else t.setEmpty()},p.$render=function(t){var i=this.$Bitmap,e=i[1];e&&(t.imageSmoothingEnabled=i[10],t.drawImage(e,i[2],i[3],i[4],i[5],i[6],i[7],i[4],i[5]))},e}(t.DisplayObject);t.Bitmap=i,t.registerClass(i,"lark.Bitmap")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$touchChildren=!0,this.$children=[]}__extends(e,i);var n=__define,s=e;return p=s.prototype,p.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var i=this.$children,e=0;e<i.length;e++)i[e].$propagateFlagsDown(t)}},n(p,"numChildren",function(){return this.$children.length}),p.addChild=function(t){var i=this.$children.length;return t.$parent==this&&i--,this.doAddChild(t,i)},p.addChildAt=function(t,i){return i=0|+i,(0>i||i>=this.$children.length)&&(i=this.$children.length,t.$parent===this&&i--),this.doAddChild(t,i)},p.doAddChild=function(i,n){var s=i.$parent;if(s==this)return this.doSetChildIndex(i,n),i;s&&s.removeChild(i),this.$children.splice(n,0,i),i.$setParent(this);var r=this.$stage;if(r&&i.$onAddToStage(r,this.$nestLevel+1),i.emitWith(t.Event.ADDED,!0),r)for(var a=e.$EVENT_ADD_TO_STAGE_LIST;a.length;){var h=a.shift();h.$stage&&h.emitWith(t.Event.ADDED_TO_STAGE)}var o=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(i,o,o),i.$propagateFlagsDown(624),this.$propagateFlagsUp(4),this.$childAdded(i,n),i},p.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},p.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},p.getChildIndex=function(t){return this.$children.indexOf(t)},p.getChildByName=function(t){for(var i,e=this.$children,n=e.length,s=0;n>s;s++)if(i=e[s],i.name==t)return i;return null},p.removeChild=function(t){var i=this.$children.indexOf(t);return i>=0?this.doRemoveChild(i):null},p.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.doRemoveChild(t):null},p.doRemoveChild=function(i){i=0|+i;var n=this.$children,s=n[i];if(this.$childRemoved(s,i),s.emitWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var r=e.$EVENT_REMOVE_FROM_STAGE_LIST;r.length>0;){var a=r.shift();a.emitWith(t.Event.REMOVED_FROM_STAGE),a.$stage=null}}var h=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(s,h,null),s.$propagateFlagsDown(624),s.$setParent(null),n.splice(i,1),this.$propagateFlagsUp(4),s},p.setChildIndex=function(t,i){i=0|+i,(0>i||i>=this.$children.length)&&(i=this.$children.length-1),this.doSetChildIndex(t,i)},p.doSetChildIndex=function(t,i){var e=this.$children.indexOf(t);e!=i&&(this.$childRemoved(t,e),this.$children.splice(e,1),this.$children.splice(i,0,t),this.$childAdded(t,i),t.$invalidateTransform(),this.$propagateFlagsUp(4))},p.swapChildrenAt=function(t,i){t=0|+t,i=0|+i,t>=0&&t<this.$children.length&&i>=0&&i<this.$children.length&&this.doSwapChildrenAt(t,i)},p.swapChildren=function(t,i){var e=this.$children.indexOf(t),n=this.$children.indexOf(i);-1==e||-1==n||this.doSwapChildrenAt(e,n)},p.doSwapChildrenAt=function(t,i){if(t>i){var e=i;i=t,t=e}else if(t===i)return;var n=this.$children,s=n[t],r=n[i];this.$childRemoved(s,t),this.$childRemoved(r,i),n[t]=r,n[i]=s,this.$childAdded(r,t),this.$childAdded(s,i),s.$invalidateTransform(),r.$invalidateTransform(),this.$propagateFlagsUp(4)},p.removeChildren=function(){for(var t=this.$children,i=t.length-1;i>=0;i--)this.doRemoveChild(i)},p.$childAdded=function(){},p.$childRemoved=function(){},p.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e);var n=this.$children,s=n.length;e++;for(var r=0;s>r;r++){var a=this.$children[r];a.$onAddToStage(t,e)}},p.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,n=0;e>n;n++){var s=t[n];s.$onRemoveFromStage()}},p.$measureChildBounds=function(i){var e=this.$children,n=e.length;if(0!==n){for(var s=0,r=0,a=0,h=0,o=!1,l=-1;n>l;l++){var u=-1===l?i:e[l].$getTransformedBounds(this,t.$TempRectangle);
u.isEmpty()||(o?(s=Math.min(s,u.x),r=Math.max(r,u.x+u.width),a=Math.min(a,u.y),h=Math.max(h,u.y+u.height)):(o=!0,s=u.x,r=s+u.width,a=u.y,h=a+u.height))}i.setTo(s,a,r-s,h-a)}},n(p,"touchChildren",function(){return this.$touchChildren},function(t){this.$setTouchChildren(!!t)}),p.$setTouchChildren=function(t){this.$touchChildren=t},p.$invalidate=function(t){if(i.prototype.$invalidate.call(this,t),t){var e=this.$displayList||this.$parentDisplayList,n=this.$children;if(n)for(var s=n.length-1;s>=0;s--)this.markChildDirty(n[s],e)}},p.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},p.markChildDirty=function(t,i){if(!t.$hasFlags(512)){t.$setFlags(512);var e=t.$displayList;if((e||t.$renderRegion)&&i&&i.markDirty(e||t),!e){var n=t.$children;if(n)for(var s=n.length-1;s>=0;s--)this.markChildDirty(n[s],i)}}},p.$cacheAsBitmapChanged=function(){i.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,e=this.$children,n=e.length-1;n>=0;n--)this.assignParentDisplayList(e[n],t,t)},p.assignParentDisplayList=function(t,i,e){t.$parentDisplayList=e,t.$setFlags(512);var n=t.$displayList;if((t.$renderRegion||n)&&i&&i.markDirty(n||t),!n){var s=t.$children;if(s)for(var r=s.length-1;r>=0;r--)this.assignParentDisplayList(s[r],i,e)}},p.$hitTest=function(t,e){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),s=n.a*t+n.c*e+n.tx,r=n.b*t+n.d*e+n.ty;if(this.$scrollRect&&!this.$scrollRect.contains(s,r))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,h=!1,o=a.length-1;o>=0;o--){var l=a[o];if(!l.$maskedObject){var u=l.$hitTest(t,e);if(u){if(h=!0,u.$touchEnabled)break;u=null}}}return u?this.$touchChildren?u:this:h?this:i.prototype.$hitTest.call(this,t,e)},e.$EVENT_ADD_TO_STAGE_LIST=[],e.$EVENT_REMOVE_FROM_STAGE_LIST=[],e}(t.DisplayObject);t.Sprite=i,t.registerClass(i,"lark.Sprite",["lark.DisplayObjectContainer"])}(lark||(lark={}));var lark;!function(t){function i(i,e,n){for(var s,r=0,a=i.length,h=0;a>h;h++){var o=i.charAt(h),l=t.TextMeasurer.measureText(o,n);if(r+l>e){s=h;break}r+=l}return 0==s?1:s}var e=new RegExp("(?=[--]|\b|s)(?![)}.,!?]:])"),n=function(n){function s(i){n.call(this),this.textLines=[],this.$renderRegion=new t.sys.Region,this.$TextField={0:30,1:0,2:0,3:0/0,4:0/0,5:0,6:0,7:0,8:"sans-serif",9:"left",10:"top",11:"#000000",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!0,20:!1,21:0},this.text=i}__extends(s,n);var r=__define,a=s;return p=a.prototype,r(p,"fontFamily",function(){return this.$TextField[8]},function(t){var i=this.$TextField;i[8]!=t&&(i[8]=t,this.invalidateFontString())}),r(p,"fontSize",function(){return this.$TextField[0]},function(t){t=+t||0;var i=this.$TextField;i[0]!==t&&(i[0]=t,this.invalidateFontString())}),r(p,"bold",function(){return this.$TextField[15]},function(t){t=!!t;var i=this.$TextField;t!==i[15]&&(i[15]=t,this.invalidateFontString())}),r(p,"italic",function(){return this.$TextField[16]},function(t){t=!!t;var i=this.$TextField;t!==i[16]&&(i[16]=t,this.invalidateFontString())}),p.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateContentBounds()},p.getFontString=function(){var i=this.$TextField;return i[17]&&(i[17]=!1,i[12]=t.sys.toFontString(this)),i[12]},r(p,"textAlign",function(){return this.$TextField[9]},function(t){var i=this.$TextField;i[9]!=t&&(i[9]=t,this.$invalidateContentBounds())}),r(p,"verticalAlign",function(){return this.$TextField[10]},function(t){var i=this.$TextField;i[10]!=t&&(i[10]=t,this.$invalidateContentBounds())}),r(p,"lineSpacing",function(){return this.$TextField[1]},function(t){t=+t||0;var i=this.$TextField;i[1]!==t&&(i[1]=t,this.$invalidateContentBounds())}),r(p,"textColor",function(){return this.$TextField[2]},function(i){i=0|+i;var e=this.$TextField;e[2]!==i&&(e[2]=i,e[11]=t.sys.toColorString(i),this.$invalidate())}),r(p,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var i=this.$TextField;t!==i[19]&&(i[20]||(i[19]=t,this.$invalidateContentBounds()))}),r(p,"text",function(){return this.$TextField[13]},function(t){(null===t||void 0===t)&&(t=""),t+="",this.$setText(t)}),p.$setText=function(t){var i=this.$TextField;t!=i[13]&&(i[13]=t,this.$invalidateContentBounds())},r(p,"numLines",function(){return this.textLines.length}),r(p,"textWidth",function(){return this.updateTextLines(),this.$TextField[5]}),r(p,"textHeight",function(){return this.updateTextLines(),this.$TextField[6]}),p.$getWidth=function(){var t=this.$TextField[3];return isNaN(t)?this.$getContentBounds().width:t},p.$setWidth=function(t){t=+t;var i=this.$TextField;0>t||t===i[3]||(i[3]=t,this.$invalidateContentBounds())},p.$getHeight=function(){var t=this.$TextField[4];return isNaN(t)?this.$getContentBounds().height:t},p.$setHeight=function(t){t=+t;var i=this.$TextField;0>t||t===i[4]||(i[4]=t,this.$invalidateContentBounds())},p.$invalidateContentBounds=function(){n.prototype.$invalidateContentBounds.call(this),this.$TextField[18]=!0},p.$measureContentBounds=function(t){this.updateTextLines();var i,e=this.$TextField;if(isNaN(e[4]))i=e[6];else{i=e[4];var n=e[0]+4;n>i&&(i=n)}var s=isNaN(e[3])?e[5]:e[3];s<e[7]&&(s=e[7]),t.setTo(0,0,s,i)},p.$render=function(i){var e=this.updateTextLines();if(e){var n=this.$TextField;i.textAlign="left",i.textBaseline="middle",i.font=this.getFontString(),i.fillStyle=n[11];var s=e.length,r=n[0],a=.5*r,h=a+2,o=r+n[1],l=n[6],u=!isNaN(n[4]),c=u?n[4]:Number.POSITIVE_INFINITY;if(u&&c>l){var p=0;n[10]==t.VerticalAlign.MIDDLE?p=.5:n[10]==t.VerticalAlign.BOTTOM&&(p=1),h+=p*(c-l)}var d=h;h=Math.round(h),d=h-d;var f=0;n[9]==t.HorizontalAlign.CENTER?f=.5:n[9]==t.HorizontalAlign.RIGHT&&(f=1);var $,g=n[14];$=isNaN(n[3])?n[5]:n[3];for(var v=c-2+d,m=0;s>m;m++){var y=e[m],T=g[m],x=Math.round(($-T)*f);0>x&&(x=0),(v>=h+a||0===m)&&i.fillText(y,x,h),h+=o}}},p.updateTextLines=function(){var e=this.$TextField;if(!e[18])return this.textLines;this.textLines.length=0;var n=e[14];n.length=0,e[5]=0,e[6]=0;var s=e[3],r=e[13];if(!r||0===s)return null;var a=e[20];if(a){for(var h=r.length,o="",l=0;h>l;l++)o+="";r=o}var u,c=!isNaN(s),p=this.getFontString(),d=r.split(/(?:\r\n|\r|\n)/),f=d.length,$=0,g=0;if(c&&e[19]){for(var l=0;f>l;l++){var v=d[l],m=t.TextMeasurer.measureText(v,p);if(m>s){for(var y="",T=0,x=this.$splitWords(v),E=x.length,_=0;E>_;_++){var k=x[_];m=t.TextMeasurer.measureText(k,p),T+m>s&&(0===T?(u=i(k,s,p),x.splice(_+1,0,k.substring(u)),k=k.substring(0,u),m=t.TextMeasurer.measureText(k,p),d.splice(l,0,k),n[l]=m,E++,m>$&&($=m),m=0,k=""):(d.splice(l,0,y),n[l]=T,T>$&&($=T),y="",T=0,m>s&&(m=0,k="",_--)),l++,f++),T+=m,y+=k}d[l]=y,n[l]=T}else n[l]=m,m>$&&($=m)}g=Math.max(g,$)}else for(l=0;f>l;l++)v=d[l],m=t.TextMeasurer.measureText(v,p),c&&m>s&&(u=i(v,s,p),v=d[l]=v.substring(0,u),g=Math.max(g,t.TextMeasurer.measureText(v,p))),n[l]=m,m>$&&($=m);return e[7]=g,e[5]=Math.ceil($),e[6]=Math.ceil(d.length*(e[0]+e[1])-e[1]+4),this.textLines=d,d},p.$splitWords=function(t){return t.split(e)},s}(t.DisplayObject);t.TextField=n,t.registerClass(n,"lark.TextField")}(lark||(lark={}));var lark;!function(t){var i;!function(t){function i(t){var i="";return t.italic&&(i+="italic "),t.bold&&(i+="bold "),i+=(t.fontSize||12)+"px ",i+=t.fontFamily||"sans-serif"}function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var i=t.toString(16).toUpperCase();i.length<6;)i="0"+i;return"#"+i}t.toFontString=i,t.toColorString=e}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=[],n=["source-over","lighter","destination-out"],s="source-over",r=function(r){function a(e){r.call(this),this.$isDirty=!1,this.$renderAlpha=1,this.$renderMatrix=new t.Matrix,this.$ratioMatrix=new t.Matrix,this.$ratioChanged=!1,this.$pixelRatio=1,this.$renderRegion=new i.Region,this.surface=null,this.offsetX=0,this.offsetY=0,this.needRedraw=!1,this.rootMatrix=new t.Matrix,this.dirtyNodes={},this.dirtyNodeList=[],this.dirtyList=null,this.dirtyRegion=new i.DirtyRegion,this.sizeChanged=!0,this.root=e}__extends(a,r);var h=a;return p=h.prototype,a.release=function(n){i.surfaceFactory.release(n.surface),t.Matrix.release(n.$renderMatrix),t.Matrix.release(n.$ratioMatrix),n.surface=null,n.renderContext=null,n.root=null,n.$renderMatrix=null,n.$ratioMatrix=null,n.needRedraw=!1,n.$isDirty=!1,e.push(n)},a.create=function(n){var s=e.pop();s||(s=new t.sys.DisplayList(n));var r=i.surfaceFactory.create();return r?(s.surface=r,s.renderContext=r.renderContext,s.root=n,s.$renderMatrix=t.Matrix.create(),s.$renderMatrix.setTo(1,0,0,1,0,0),s.$pixelRatio=1,s.$ratioMatrix=t.Matrix.create(),s.$ratioMatrix.setTo(1,0,0,1,0,0),s.needRedraw=!0,s.$isDirty=!0,s):null},p.$update=function(){var t=this.root;if(null==t)return!1;t.$removeFlagsUp(768),this.$renderAlpha=t.$getConcatenatedAlpha();var i=t.$getConcatenatedMatrix(),e=t.$getOriginalBounds(),n=t.$parentDisplayList,s=1;n?s=n.$pixelRatio:t.stage&&t.stage.$displayList&&(s=t.stage.$displayList.$pixelRatio),this.setDevicePixelRatio(s);var r=this.$renderRegion;if(this.needRedraw&&this.updateDirtyRegions(),!n)return r.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved&&!n.$ratioChanged)return!1;r.moved=!1;var a=this.$renderMatrix;a.copyFrom(i);var h=n.root;return h!==t.$stage&&t.$getConcatenatedMatrixAt(h,a),this.$ratioMatrix.$preMultiplyInto(a,a),r.updateRegion(e,a),!0},p.$render=function(t){var i=this.surface;i&&t.drawImage(i,this.offsetX,this.offsetY,i.width/this.$pixelRatio,i.height/this.$pixelRatio)},p.setClipRect=function(t,i){t*=this.$pixelRatio,i*=this.$pixelRatio,this.dirtyRegion.setClipRect(t,i),this.rootMatrix=null;var e=this.renderContext.surface;e.width=t,e.height=i,this.surface=e},p.markDirty=function(t){var i=t.$hashCode;if(!this.dirtyNodes[i]&&(this.dirtyNodes[i]=!0,this.dirtyNodeList.push(t),!this.needRedraw)){this.needRedraw=!0;var e=this.root.$parentDisplayList;e&&e.markDirty(this)}},p.updateDirtyRegions=function(){var t=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes={};for(var i=this.dirtyRegion,e=t.length,n=0;e>n;n++){var s=t[n],r=s.$renderRegion;s.$renderAlpha>0&&i.addRegion(r)&&(s.$isDirty=!0);var a=s.$update();s.$renderAlpha>0&&(a||!s.$isDirty)&&i.addRegion(r)&&(s.$isDirty=!0)}return this.dirtyList=i.getDirtyRegions(),this.dirtyList},p.drawToSurface=function(){var t=this.rootMatrix;t&&this.changeSurfaceSize();var i=this.renderContext;i.save(),i.beginPath(),t&&i.setTransform(1,0,0,1,-this.offsetX*this.$pixelRatio,-this.offsetY*this.$pixelRatio);var e=this.dirtyList;this.dirtyList=null;for(var n=e.length,s=0;n>s;s++){var r=e[s];i.clearRect(r.minX,r.minY,r.width,r.height),i.rect(r.minX,r.minY,r.width,r.height)}i.clip(),t&&i.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty);var a=this.drawDisplayObject(this.root,i,e,t,null,null);return i.restore(),this.dirtyRegion.clear(),this.needRedraw=!1,this.$ratioChanged=!1,a},p.drawDisplayObject=function(t,i,e,n,s,r){var a,h,o=0;if(s?(s.needRedraw&&(o+=s.drawToSurface()),a=s,h=1):t.$renderRegion&&(a=t,h=t.$renderAlpha),a){var l=a.$renderRegion;if(r&&!r.intersects(l))a.$isDirty=!1;else if(!a.$isDirty)for(var u=e.length,c=0;u>c;c++)if(l.intersects(e[c])){a.$isDirty=!0;break}if(a.$isDirty){o++,i.globalAlpha=h;var p=a.$renderMatrix;n?(i.transform(p.a,p.b,p.c,p.d,p.tx,p.ty),a.$render(i),i.setTransform(n.a,n.b,n.c,n.d,n.tx*this.$pixelRatio,n.ty*this.$pixelRatio)):(i.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),a.$render(i)),a.$isDirty=!1}}if(s)return o;var d=t.$children;if(d)for(var f=d.length,$=0;f>$;$++){var g=d[$];!g.$visible||g.$alpha<=0||g.$maskedObject||(o+=0!==g.$blendMode||g.$mask&&g.$mask.$parentDisplayList?this.drawWithClip(g,i,e,n,r):g.$scrollRect?this.drawWithScrollRect(g,i,e,n,r):this.drawDisplayObject(g,i,e,n,g.$displayList,r))}return o},p.drawWithClip=function(e,r,a,h,o){var l=0,u=0!==e.$blendMode;if(u){var c=n[e.$blendMode];c||(c=s)}var p=e.$scrollRect,d=e.$mask;d&&!d.$parentDisplayList&&(d=null);var f,$=t.Matrix.create();$.copyFrom(e.$getConcatenatedMatrix());var g,v=e.$parentDisplayList.root;if(v!==e.$stage&&(g=v.$getInvertedConcatenatedMatrix(),g.$preMultiplyInto($,$)),this.$ratioMatrix.$preMultiplyInto($,$),d){var m=d.$getOriginalBounds();f=i.Region.create();var y=t.Matrix.create();y.copyFrom(d.$getConcatenatedMatrix()),g&&g.$preMultiplyInto(y,y),this.$ratioMatrix.$preMultiplyInto(y,y),f.updateRegion(m,y),t.Matrix.release(y)}var T;if(p&&(T=i.Region.create(),T.updateRegion(p,$)),T&&f?(T.intersect(f),i.Region.release(f)):!T&&f&&(T=f),T){if(T.isEmpty()||o&&!o.intersects(T))return i.Region.release(T),t.Matrix.release($),l}else T=i.Region.create(),m=e.$getOriginalBounds(),T.updateRegion(m,$);for(var x=!1,E=a.length,_=0;E>_;_++)if(T.intersects(a[_])){x=!0;break}if(!x)return i.Region.release(T),t.Matrix.release($),l;var k=this.createRenderContext(T.width,T.height);if(!k)return l+=this.drawDisplayObject(e,r,a,h,e.$displayList,o),i.Region.release(T),t.Matrix.release($),l;if(p){var y=$;k.setTransform(y.a,y.b,y.c,y.d,y.tx-T.minX,y.ty-T.minY),k.beginPath(),k.rect(p.x,p.y,p.width,p.height),k.clip()}k.setTransform(1,0,0,1,-T.minX,-T.minY);var C=t.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);if(l+=this.drawDisplayObject(e,k,a,C,e.$displayList,T),t.Matrix.release(C),d){var M=this.createRenderContext(T.width,T.height);if(!M)return l+=this.drawDisplayObject(e,r,a,h,e.$displayList,o),i.surfaceFactory.release(k.surface),i.Region.release(T),t.Matrix.release($),l;M.setTransform(1,0,0,1,-T.minX,-T.minY),C=t.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);var b=this.drawDisplayObject(d,M,a,C,d.$displayList,T);t.Matrix.release(C),b>0&&(l+=b,k.globalCompositeOperation="destination-in",k.setTransform(1,0,0,1,0,0),k.globalAlpha=1,k.drawImage(M.surface,0,0)),i.surfaceFactory.release(M.surface)}return l>0&&(l++,u&&(r.globalCompositeOperation=c),h?(r.translate(T.minX,T.minY),r.drawImage(k.surface,0,0),r.setTransform(h.a,h.b,h.c,h.d,h.tx*this.$pixelRatio,h.ty*this.$pixelRatio)):(r.setTransform(1,0,0,1,T.minX,T.minY),r.drawImage(k.surface,0,0)),u&&(r.globalCompositeOperation=s)),i.surfaceFactory.release(k.surface),i.Region.release(T),t.Matrix.release($),l},p.drawWithScrollRect=function(e,n,s,r,a){var h=0,o=e.$scrollRect,l=t.Matrix.create();l.copyFrom(e.$getConcatenatedMatrix());var u=e.$parentDisplayList.root;u!==e.$stage&&u.$getInvertedConcatenatedMatrix().$preMultiplyInto(l,l),this.$ratioMatrix.$preMultiplyInto(l,l);var c=i.Region.create();if(o.isEmpty()||c.updateRegion(o,l),c.isEmpty()||a&&!a.intersects(c))return i.Region.release(c),t.Matrix.release(l),h;for(var p=!1,d=s.length,f=0;d>f;f++)if(c.intersects(s[f])){p=!0;break}return p?(n.save(),r?(n.setTransform(r.a,r.b,r.c,r.d,r.tx*this.$pixelRatio,r.ty*this.$pixelRatio),n.transform(l.a,l.b,l.c,l.d,l.tx,l.ty)):n.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),n.beginPath(),n.rect(o.x,o.y,o.width,o.height),n.clip(),r&&n.setTransform(r.a,r.b,r.c,r.d,r.tx*this.$pixelRatio,r.ty*this.$pixelRatio),h+=this.drawDisplayObject(e,n,s,r,e.$displayList,c),n.restore(),i.Region.release(c),t.Matrix.release(l),h):(i.Region.release(c),t.Matrix.release(l),h)},p.createRenderContext=function(t,e){var n=i.surfaceFactory.create(!0);return n?(n.width=Math.max(257,t),n.height=Math.max(257,e),n.renderContext):null},p.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,n=this.root.$getOriginalBounds(),s=this.$pixelRatio,r=this.$pixelRatio;this.offsetX=n.x,this.offsetY=n.y;var a=this.renderContext,h=a.surface;if(this.sizeChanged)this.sizeChanged=!1,h.width=n.width*s,h.height=n.height*r;else{var o=i.sharedRenderContext,l=o.surface;i.sharedRenderContext=a,this.renderContext=o,this.surface=l,l.width=n.width*s,l.height=n.height*r,0!==h.width&&0!==h.height&&(o.setTransform(1,0,0,1,0,0),o.drawImage(h,(t-this.offsetX)*s,(e-this.offsetY)*r)),h.height=1,h.width=1}this.rootMatrix.setTo(1,0,0,1,-this.offsetX,-this.offsetY),this.renderContext.setTransform(1,0,0,1,-n.x,-n.y)},p.setDevicePixelRatio=function(i){void 0===i&&(i=1),this.$pixelRatio==i&&this.$ratioMatrix||(this.$ratioMatrix||(this.$ratioMatrix=t.Matrix.create()),this.$ratioChanged=!0,this.$pixelRatio=i,this.$ratioMatrix.setTo(i,0,0,i,0,0),this.root.$invalidate(!0))},a}(t.HashObject);i.DisplayList=r,t.registerClass(r,"lark.sys.DisplayList",["lark.sys.Renderable"])}(i=t.sys||(t.sys={}))}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this._isTyping=!1,this._isFocus=!1,this.timeoutId=-1,this.$TextField[19]=!1,this.$TextField[22]=0/0,this.$TextField[23]=0/0,this.on(t.TouchEvent.TOUCH_BEGIN,this.handleTouchBegin,this)}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"displayAsPassword",function(){return this.$TextField[20]},function(t){this.$TextField[20]!=t&&(this.$TextField[20]=t,t&&(this.wordWrap=!1),this.$invalidateContentBounds())}),n(p,"maxChars",function(){return this.$TextField[21]},function(t){var i=this.$TextField;i[21]!=t&&(i[21]=t,this.updateTextAdapter())}),n(p,"selectionActivePosition",function(){var t=this.$TextField[22];return isNaN(t)&&(t=this.text.length),t}),n(p,"selectionAnchorPosition",function(){var t=this.$TextField[23];return isNaN(t)&&(t=this.text.length),t}),p.selectRange=function(i,e){if(i=0|i,e=0|e,(i!=this.$TextField[23]||e!=this.$TextField[22])&&(this.$TextField[23]=i,this.$TextField[22]=e,this._isFocus)){var n=t.sys.$getTextAdapter(this);n.$selectRange(i,e)}},p.handleTouchBegin=function(){this._isFocus||(this._isFocus=!0,this.setAsCurrent())},p.setAsCurrent=function(){var i=t.sys.$getTextAdapter(this);i.$setCurrentTextInput(this)},p.$setUserInputText=function(i){i!=this.text&&(this.$setText(i),this.emitWith(t.Event.CHANGE))},p.$startInput=function(){this._isTyping=!0,this.$invalidateContentBounds(),this.emitWith(t.Event.FOCUS_IN)},p.$endInput=function(){this._isTyping=!1,this._isFocus=!1,this.$invalidateContentBounds(),this.emitWith(t.Event.FOCUS_OUT)},p.$setX=function(t){return this.updateTextAdapter(),i.prototype.$setX.call(this,t)},p.$setY=function(t){return this.updateTextAdapter(),i.prototype.$setY.call(this,t)},p.$measureContentBounds=function(t){i.prototype.$measureContentBounds.call(this,t),this.updateTextAdapter()},p.$render=function(t){this._isTyping||i.prototype.$render.call(this,t)},p.updateTextAdapter=function(){var i=this;this._isFocus&&(-1!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){if(i._isFocus){var e=t.sys.$getTextAdapter(i);e.$initializeInput()}i.timeoutId=-1},0))},p.$splitWords=function(t){for(var i=new Array(t.length),e=0;e<t.length;e++)i[e]=t.charAt(e);return i},e}(t.TextField);t.TextInput=i,t.registerClass(i,"lark.TextInput")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(e){i.call(this),this._callBacks={},this._callBacksThis={},this._callBacksArgs={},this.enterFrameFlag=!1,this._currentFrame=-1,this.frames=[],this.$isPlaying=!1,this.setFrames(e),this.on(t.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.on(t.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)}__extends(e,i);var n=__define,s=e;return p=s.prototype,p.onAddToStage=function(){this.$isPlaying&&!this.enterFrameFlag&&this.on(t.Event.ENTER_FRAME,this.onEnterFrame,this)},p.onRemoveFromStage=function(){this.enterFrameFlag&&this.removeListener(t.Event.ENTER_FRAME,this.onEnterFrame,this)},p.setFrames=function(t){this.frames=t,t&&t.length?(this.setPlaying(!0),-1!=this._currentFrame&&(this._currentFrame=0),this.gotoFrame(0)):(this.setPlaying(!1),this._currentFrame=-1)},p.addFrameScript=function(t,i,e){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];t=0|+t,0>t&&(t=0),i?(this._callBacks[t]=i,this._callBacksThis[t]=e,this._callBacksArgs[t]=n):(delete this._callBacks[t],delete this._callBacksThis[t],delete this._callBacksArgs[t])},p.gotoFrame=function(t){this._currentFrame!=t&&(this._currentFrame=t,this.executeFrameScript(),this.bitmapData!=this.frames[this._currentFrame]&&(this.bitmapData=this.frames[this._currentFrame]))},n(p,"currentFrame",function(){return this._currentFrame}),p.executeFrameScript=function(){if(this.frames.length){var t=this._currentFrame,i=this._callBacks[t],e=this._callBacksThis[t],n=this._callBacksArgs[t];i&&i.apply(e,n)}},p.setPlaying=function(i){this.$isPlaying=i,this.$isPlaying&&this.stage&&!this.enterFrameFlag&&this.on(t.Event.ENTER_FRAME,this.onEnterFrame,this),!this.$isPlaying&&this.enterFrameFlag&&this.removeListener(t.Event.ENTER_FRAME,this.onEnterFrame,this)},n(p,"isPlaying",function(){return this.$isPlaying}),p.onEnterFrame=function(){this.$isPlaying&&this.gotoFrame((this._currentFrame+1)%this.frames.length)},p.gotoAndPlay=function(t){var i=this.frames.length;i&&(t=0|+t,t=0>t?0:t,t>=i&&(t=i-1),this.setPlaying(!0),this._currentFrame!=t&&this.gotoFrame(t))},p.gotoAndStop=function(t){var i=this.frames.length;i&&(t=0|+t,t=0>t?0:t,this.setPlaying(!1),t>=i&&(t=i-1),this._currentFrame!=t&&this.gotoFrame(t))},p.nextFrame=function(){var t=this.frames.length;this.setPlaying(!1),t&&this._currentFrame!=t-1&&this.gotoFrame(this._currentFrame+1)},p.play=function(){this.setPlaying(!0)},p.prevFrame=function(){this.setPlaying(!1),this.frames.length&&0!=this._currentFrame&&this.gotoFrame(this._currentFrame-1)},p.stop=function(){this.setPlaying(!1)},n(p,"totalFrames",function(){return this.frames.length}),e}(t.Bitmap);t.Animation=i,t.registerClass(i,"lark.Animation")}(lark||(lark={}));var lark;!function(t){var i=function(i){function e(){i.call(this),this.$stageWidth=0,this.$stageHeight=0,this.$scaleMode="noScale",this.$highResolutionMode="default",this.implMap={},this.$stage=this,this.$nestLevel=1}__extends(e,i);var n=__define,s=e;return p=s.prototype,n(p,"frameRate",function(){return t.sys.$ticker.$frameRate},function(i){t.sys.$ticker.$setFrameRate(i)}),n(p,"stageWidth",function(){return this.$stageWidth}),n(p,"stageHeight",function(){return this.$stageHeight}),n(p,"scaleMode",function(){return this.$scaleMode},function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())}),n(p,"highResolutionMode",function(){return this.$highResolutionMode},function(t){this.$highResolutionMode!=t&&(this.$highResolutionMode=t,this.$screen.updateScreenSize())}),p.invalidate=function(){t.sys.$invalidateRenderFlag=!0},p.registerImplementation=function(t,i){this.implMap[t]=i},p.getImplementation=function(t){return this.implMap[t]},e}(t.Sprite);t.Stage=i,t.registerClass(i,"lark.Stage")}(lark||(lark={}));var lark;!function(t){var i;!function(i){var e=function(e){function n(t,i,n){e.call(this),this.isPlaying=!1,this.entryClassName=n,this.stage=i,this.screenDisplayList=this.createDisplayList(i,t)}__extends(n,e);var s=n;return p=s.prototype,p.createDisplayList=function(t,e){var n=new i.DisplayList(t);return n.renderContext=e,t.$displayList=n,n.setClipRect(t.$stageWidth,t.$stageHeight),n},p.start=function(){!this.isPlaying&&this.stage&&(this.isPlaying=!0,this.root||this.initialize(),i.$ticker.$addPlayer(this))},p.initialize=function(){var i;if(this.entryClassName&&(i=t.getDefinitionByName(this.entryClassName)),i){var e=new i;this.root=e,e instanceof t.DisplayObject&&this.stage.addChild(e)}},p.stop=function(){this.pause(),this.stage=null},p.pause=function(){this.isPlaying&&(this.isPlaying=!1,i.$ticker.$removePlayer(this))},p.$render=function(i){var e=this.stage,n=(t.getTimer(),e.$displayList.updateDirtyRegions()),s=(t.getTimer(),0);n.length>0&&(n=n.concat(),s=e.$displayList.drawToSurface())},p.updateStageSize=function(i,e,n){void 0===n&&(n=1);var s=this.stage;(i!==s.$stageWidth||e!==s.$stageHeight||this.screenDisplayList.$pixelRatio!==n)&&(s.$stageWidth=i,s.$stageHeight=e,this.screenDisplayList.setDevicePixelRatio(n),this.screenDisplayList.setClipRect(i,e),s.emitWith(t.Event.RESIZE),s.$invalidate(!0))},n}(t.HashObject);i.Player=e,t.registerClass(e,"lark.sys.Player"),i.$logToFPS}(i=t.sys||(t.sys={}))}(lark||(lark={}));